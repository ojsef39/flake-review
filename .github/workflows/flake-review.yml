# Flake-review testing itself via the reusable workflow.
# Installs from the checked-out repo to test the PR's code.
#
# For other repos, use:
#   uses: ojsef39/flake-review/.github/workflows/flake-review-reusable.yml@main

name: Flake Review

on:
  pull_request:
    branches: [main]

permissions:
  contents: read
  pull-requests: write

jobs:
  review:
    uses: ./.github/workflows/flake-review-reusable.yml
    with:
      install-from-checkout: true
      concurrency-group: ${{ github.workflow }}-${{ github.event.pull_request.number || github.ref }}
    secrets:
      CACHIX_AUTH_TOKEN: ${{ secrets.CACHIX_AUTH_TOKEN }}

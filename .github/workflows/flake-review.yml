# Flake-review testing itself via the reusable workflow.
# Uses flake-ref: ".#flake-review" to test the local build.
#
# For other repos, see flake-review-reusable.yml or use:
#   uses: ojsef39/flake-review/.github/workflows/flake-review-reusable.yml@main

name: Flake Review

on:
  pull_request:
    branches: [main]

permissions:
  contents: read
  pull-requests: write

jobs:
  review:
    uses: ./.github/workflows/flake-review-reusable.yml
    with:
      flake-ref: ".#flake-review"
      concurrency-group: ${{ github.workflow }}-${{ github.event.pull_request.number || github.ref }}
    secrets:
      CACHIX_AUTH_TOKEN: ${{ secrets.CACHIX_AUTH_TOKEN }}
